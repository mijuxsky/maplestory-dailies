
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MapleStory Dailies</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    :root{
      --radius:12px; --shadow:0 6px 16px rgba(0,0,0,.12);
      --ui:14px; --overlay:rgba(0,0,0,.55);
      --bg:#f4f0fa; --fg:#4b3b60;
      --card-bg:#ffffff; --card-border:#e6def6;
      --control-bg:#ffffff; --control-fg:#4b3b60; --control-border:#cfc4ea;
      --button-bg:#e7def7; --button-fg:#3c2e54; --button-border:#cfc4ea;
      --icon:#7c5db0; --icon-bg:transparent; --icon-hover:rgba(124,93,176,.14);
      --task-underline:1px dotted currentColor;
      --name-underline:1px solid currentColor;
      --ph-outline:#7c5db0; --ph-bg:rgba(124,93,176,.08);
      --meta-fg:#6b7280;
    }
    body.light{ --bg:#f7f7f8; --fg:#333; --card-bg:#ffffff; --card-border:#e7e7ea; --control-bg:#ffffff; --control-fg:#222; --control-border:#d8d8dc; --button-bg:#ededf1; --button-fg:#222; --button-border:#d8d8dc; --icon:#555; --icon-bg:transparent; --icon-hover:rgba(0,0,0,.07); --ph-outline:#9aa0a6; --ph-bg:rgba(0,0,0,.04); --meta-fg:#6b7280;}
    body.cloud{ --bg:#eaf4ff; --fg:#2f4152; --card-bg:#ffffff; --card-border:#d6e7f7; --control-bg:#f6fbff; --control-fg:#2f4152; --control-border:#c7def2; --button-bg:#dcebfb; --button-fg:#213444; --button-border:#c4dcf5; --icon:#5a86b5; --icon-bg:transparent; --icon-hover:rgba(90,134,181,.14); --ph-outline:#8aaed2; --ph-bg:rgba(90,134,181,.10); --meta-fg:#6b7280;}
    body.lavender{ --bg:#f4f0fa; --fg:#4b3b60; --card-bg:#ffffff; --card-border:#e6def6; --control-bg:#ffffff; --control-fg:#4b3b60; --control-border:#cfc4ea; --button-bg:#e7def7; --button-fg:#3c2e54; --button-border:#cfc4ea; --icon:#7c5db0; --icon-bg:transparent; --icon-hover:rgba(124,93,176,.14); --ph-outline:#a79bc7; --ph-bg:rgba(124,93,176,.08); --meta-fg:#6b7280;}
    body.matcha{ --bg:#f0faf2; --fg:#2f3b2f; --card-bg:#e8f7ea; --card-border:#cfead4; --control-bg:#f7fdf8; --control-fg:#2f3b2f; --control-border:#cfead4; --button-bg:#d9f0de; --button-fg:#243224; --button-border:#c6e4cc; --icon:#4a8c4a; --icon-bg:transparent; --icon-hover:rgba(74,140,74,.14); --ph-outline:#8abf97; --ph-bg:rgba(74,140,74,.10); --meta-fg:#64748b;}
    body.dark{ --bg:#12131a; --fg:#e6e7eb; --card-bg:#1f2230; --card-border:#2c3144; --control-bg:#171925; --control-fg:#e6e7eb; --control-border:#2c3144; --button-bg:#2a2e42; --button-fg:#e6e7eb; --button-border:#3a4161; --icon:#cfd3df; --icon-bg:transparent; --icon-hover:rgba(255,255,255,.09); --ph-outline:#444b63; --ph-bg:rgba(207,211,223,.10); --meta-fg:#cbd5e1;}
    body.evergreen{ --bg:#0e1a11; --fg:#d9f2de; --card-bg:#1a2b1f; --card-border:#25402d; --control-bg:#132417; --control-fg:#d9f2de; --control-border:#284833; --button-bg:#23402c; --button-fg:#d9f2de; --button-border:#2e5640; --icon:#8bcf9b; --icon-bg:transparent; --icon-hover:rgba(139,207,155,.15); --ph-outline:#2f5840; --ph-bg:rgba(139,207,155,.16); --meta-fg:#d1d5db;}

    *{ box-sizing:border-box; }
    body{ font-family:Quicksand,system-ui,sans-serif; margin:0; padding:20px; display:flex; flex-direction:column; align-items:center; font-size:var(--ui); background:var(--bg); color:var(--fg); transition:.25s background,.25s color; }
    h1{ margin:0 0 6px; font-size:20px; }
    #utc-time{ font-size:13px; margin-bottom:10px; }

    /* Toolbar */
    .toolbar{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; margin-bottom:12px; width:100%; max-width:1200px; }
    .toolbar-row{ display:flex; align-items:center; gap:8px; flex-wrap:nowrap; }
    .toolbar-row label{ font-weight:600; font-size:var(--ui); opacity:.9; font-family:inherit; white-space:nowrap; }
    .select-wrap{ position:relative; display:inline-flex; align-items:center; }
    .select-wrap::after{ content:'▾'; position:absolute; right:10px; pointer-events:none; opacity:.8; color:var(--control-fg); font-size:12px; }
    select{ appearance:none; -webkit-appearance:none; -moz-appearance:none; padding:6px 28px 6px 10px; border-radius:10px; border:1px solid var(--control-border); background:var(--control-bg); color:var(--control-fg); outline:none; font-family:inherit; font-size:var(--ui); }
    select:focus{ box-shadow:none; outline:none; }
    option{ background:var(--control-bg); color:var(--control-fg); }

    #add-character-btn, #export-btn, #import-btn{ padding:8px 12px; border-radius:10px; background:var(--button-bg); color:var(--button-fg); border:1px solid var(--button-border); font-weight:600; font-family:inherit; font-size:var(--ui); }
    #add-character-btn:hover, #export-btn:hover, #import-btn:hover{ filter:brightness(1.02); }
    #add-character-btn:active, #export-btn:active, #import-btn:active{ transform:translateY(1px); }

    /* Character cards */
    #checklists{ display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:20px; width:100%; max-width:1200px; align-items:start; }
    .character,.drop-placeholder{ border-radius:12px; box-shadow:var(--shadow); min-height:120px; position:relative; user-select:none; font-size:var(--ui); background:var(--card-bg); border:1px solid var(--card-border); }
    .character{ padding:48px 16px 12px; transition:transform .08s ease, opacity .08s ease; will-change: transform; }
    .character.dragging{ opacity:.96; transform:scale(.985); }
    .drop-placeholder{ padding:48px 16px 12px; border:1px dotted var(--ph-outline); border-radius:12px; background:transparent; opacity:.28; outline:none; box-shadow:none; pointer-events:none; }
    .window-controls-right{ position:absolute; top:6px; right:8px; display:flex; gap:6px; align-items:center; }
    .icon-btn{ width:24px; height:24px; border-radius:6px; display:flex; align-items:center; justify-content:center; font-size:14px; opacity:.7; font-family:inherit; }
    .icon-btn:hover{ background:var(--icon-hover); border-color:var(--control-border); }
    .icon-btn:active{ transform:translateY(1px); }
    .char-image-wrap{ text-align:center; margin:0 auto 2px; min-height:24px; }
    .char-image-wrap img{ max-width:150px; max-height:110px; border-radius:8px; display:inline-block; }
    .char-meta{ text-align:center; font-size:12px; color:var(--meta-fg); margin:0 0 6px; font-family:inherit; }
    .char-name{ width:100%; border:none; background:transparent; border-bottom:var(--name-underline); text-align:center; font-weight:600; margin:2px 0 6px; font-size:var(--ui); color:var(--fg); font-family:inherit; }
    .char-name:focus{ outline:none; box-shadow:none; border-bottom:var(--name-underline); }
    .checkall-row{ display:flex; align-items:center; gap:8px; justify-content:flex-end; margin:2px 0 6px; }
    .checkall-row label{ font-size:12px; opacity:.8; }
    .task{ display:grid; grid-template-columns:18px 18px 1fr auto; gap:8px; align-items:center; margin:6px 0; }
    .task input[type="text"]{ border:none; border-bottom:var(--task-underline); background:transparent; padding:2px 2px; font-size:var(--ui); color:var(--fg); font-family:inherit; }
    .task input[type="text"]:focus{ outline:none; box-shadow:none; border-bottom:var(--task-underline); }
    .task .task-delete{ background:transparent; border:none; font-size:16px; opacity:.7; color:var(--icon); width:22px; height:22px; display:flex; align-items:center; justify-content:center; font-family:inherit; }
    .modal-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.55); display:none; align-items:center; justify-content:center; z-index:1000; }
    .modal-overlay.show{ display:flex; }
    .modal{ background:#fff; color:#222; border:1px solid #ddd; border-radius:12px; padding:16px 16px 14px; min-width:320px; max-width:520px; width:min(520px,92vw); box-shadow:0 10px 28px rgba(0,0,0,.22); font-family:inherit; }
  </style>
</head>
<body class="lavender">
  <h1>MapleStory Dailies</h1>
  <div id="utc-time">Loading UTC time...</div>

  <div id="instructions">
    <button id="instr-toggle" type="button">Hide</button>
    <strong>How to use:</strong>
    <ul id="howto">
      <li><strong>Themes & Presets:</strong> Choose a Theme and one of 3 Presets (saved locally).</li>
      <li><strong>Add Characters:</strong> Click **+ Add Character** (max 20). Starts with 2 task lines (min 1, max 10).</li>
      <li><strong>Navigating with keyboard:</strong> Enter/Tab/↓ to next task (auto-adds). ↑/Shift+Tab up. ←/→ at edges to switch cards.</li>
      <li><strong>Reorder cards:</strong> Drag any card; drop anywhere in the grid. Smooth, snap-by-row then column.</li>
      <li><strong>Reorder tasks:</strong> Drag the **⋮⋮** handle to move a task; or press **Enter** to insert a task under the current one.</li>
      <li><strong>Update characters:</strong> Camera → *Set Avatar* popup. Or type a name in the card and press Enter/blur to auto-fetch avatar + Lv./Class from MapleRanks.</li>
      <li><strong>Import/Export:</strong> Use **Export** (JSON file) and **Import** to move your data between devices—no servers.</li>
      <li><strong>Daily reset:</strong> Checkboxes reset automatically at **00:00 UTC**.</li>
    </ul>
  </div>

  <div class="toolbar">
    <div class="toolbar-row" id="row-theme">
      <label for="theme">Theme:</label>
      <div class="select-wrap">
        <select id="theme">
          <option value="light">Light Mode</option>
          <option value="cloud">Cloud (Light)</option>
          <option value="lavender">Lavender (Light)</option>
          <option value="matcha">Matcha (Light)</option>
          <option value="dark">Dark Mode</option>
          <option value="evergreen">Evergreen (Dark)</option>
        </select>
      </div>
    </div>
    <div class="toolbar-row" id="row-preset">
      <label for="preset">Preset:</label>
      <div class="select-wrap">
        <select id="preset">
          <option value="1">Preset 1</option>
          <option value="2">Preset 2</option>
          <option value="3">Preset 3</option>
        </select>
      </div>
    </div>
    <div class="toolbar-row" id="row-actions">
      <button id="add-character-btn" title="Add Character">+ Add Character</button>
      <button id="export-btn" title="Export data">Export</button>
      <button id="import-btn" title="Import data">Import</button>
      <input id="import-file" type="file" accept="application/json" hidden>
    </div>
  </div>
  
  <div id="checklists"></div>

  <div id="confirm-overlay" class="modal-overlay" aria-hidden="true">
    <div class="modal confirm" role="dialog" aria-labelledby="confirm-title" aria-modal="true">
      <h3 id="confirm-title">Confirm Delete</h3>
      <p id="confirm-msg">Are you sure you want to delete this character?</p>
      <div class="actions">
        <button id="confirm-cancel" type="button">No</button>
        <button id="confirm-ok" type="button" class="danger">Yes</button>
      </div>
    </div>
  </div>
  
  <script>
    // Additional JavaScript logic goes here.
  </script>
</body>
</html>

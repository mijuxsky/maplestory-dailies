<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MapleStory Dailies</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* Existing CSS removed for brevity */
  </style>
</head>
<body class="lavender">
  <h1>MapleStory Dailies</h1>
  <div id="utc-time">Loading UTC time...</div>

  <div id="instructions">
    <button id="instr-toggle" type="button">Hide</button>
    <strong>How to use:</strong>
    <ul id="howto">
      <li>Use <em>Theme</em> & <em>Preset</em> to style and switch between three saved sets.</li>
      <li>Click <strong>+ Add Character</strong> (max 20). Each starts with two task lines (min 1, max 10).</li>
      <li>Enter/Tab/↓ to next task (auto-adds). ↑/Shift+Tab up. ←/→ at edges to switch cards.</li>
      <li><strong>Reorder cards</strong> by dragging—drop anywhere in the grid; positions snap by row then column.</li>
      <li>Click the camera → <strong>Set Avatar</strong> popup to fetch the <strong>avatar + Lv./Class</strong> from <strong>MapleRanks</strong> (or Upload your own). The name field no longer auto-fetches.</li>
      <li>Checkboxes reset at 00:00 UTC. All data is saved locally per preset.</li>
    </ul>
  </div>

  <div class="toolbar">
    <label for="theme">Theme:</label>
    <div class="select-wrap">
      <select id="theme">
        <option value="light">Light Mode</option>
        <option value="cloud">Cloud (Light)</option>
        <option value="lavender">Lavender (Light)</option>
        <option value="matcha">Matcha (Light)</option>
        <option value="dark">Dark Mode</option>
        <option value="evergreen">Evergreen (Dark)</option>
      </select>
    </div>

    <label for="preset">Preset:</label>
    <div class="select-wrap">
      <select id="preset">
        <option value="1">Preset 1</option>
        <option value="2">Preset 2</option>
        <option value="3">Preset 3</option>
      </select>
    </div>

    <button id="add-character-btn" title="Add Character">+ Add Character</button>
  </div>

  <div id="clipboard" aria-live="polite"></div>
  <div id="checklists"></div>

  <!-- Avatar search modal -->
  <div id="avatar-modal-overlay" class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-labelledby="avatar-modal-title" aria-modal="true">
      <h3 id="avatar-modal-title">Set Avatar</h3>
      <div class="row">
        <label for="avatar-name">Character Name</label>
        <input id="avatar-name" type="text" placeholder="Enter character name" />
      </div>
      <div id="avatar-error" class="error"></div>
      <div class="actions">
        <div class="left-actions">
          <button id="avatar-upload" type="button">Upload Image</button>
          <button id="avatar-delete" type="button">Delete Avatar</button>
        </div>
        <div class="right-actions">
          <button id="avatar-cancel" type="button">Cancel</button>
          <button id="avatar-search" type="button">Set Avatar</button>
        </div>
      </div>
    </div>
  </div>

  <input id="hidden-upload" type="file" accept="image/*" style="display:none" />

  <script>
    // UTC clock and function implementations here (similar to what was provided earlier)
  </script>
</body>
</html>
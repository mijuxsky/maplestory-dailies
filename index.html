<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MapleStory Dailies</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Nunito', sans-serif;
      background: #f9f7fc;
      color: #444;
      margin: 0;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      color: #6a5acd;
      margin-bottom: 5px;
    }
    #utc-time {
      margin-bottom: 20px;
      font-size: 14px;
      color: #666;
    }
    .character {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      padding: 15px 20px;
      margin: 15px 0;
      width: 300px;
    }
    .character h2 {
      font-size: 18px;
      color: #ff8fa3;
      margin-bottom: 10px;
    }
    .task {
      display: flex;
      align-items: center;
      margin: 6px 0;
    }
    .task input {
      margin-right: 10px;
      accent-color: #6a5acd;
    }
  </style>
</head>
<body>
  <h1>MapleStory Dailies</h1>
  <div id="utc-time">Loading UTC time...</div>

  <div id="checklists"></div>

  <script>
    const characters = ["Character 1", "Character 2", "Character 3", "Character 4", "Character 5"];
    const tasks = ["Daily Bosses", "Vanishing Journey", "Chu Chu Island", "Arcana", "Esfera"];

    const checklistContainer = document.getElementById('checklists');
    const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD in UTC
    const storageKey = "mapleDailies_" + today;

    // Reset automatically if new UTC day
    if (!localStorage.getItem(storageKey)) {
      localStorage.clear();
      localStorage.setItem(storageKey, "started");
    }

    characters.forEach((char, cIndex) => {
      const box = document.createElement('div');
      box.className = "character";
      box.innerHTML = `<h2>${char}</h2>`;
      tasks.forEach((task, tIndex) => {
        const id = `${char}_${task}`;
        const saved = localStorage.getItem(id) === "true";
        const wrapper = document.createElement('div');
        wrapper.className = "task";
        wrapper.innerHTML = `<input type="checkbox" id="${id}" ${saved ? "checked" : ""}> <label for="${id}">${task}</label>`;
        box.appendChild(wrapper);

        // save state
        wrapper.querySelector("input").addEventListener("change", (e) => {
          localStorage.setItem(id, e.target.checked);
        });
      });
      checklistContainer.appendChild(box);
    });

    // Update UTC time live
    function updateUTCTime() {
      const now = new Date();
      document.getElementById('utc-time').innerText =
        "UTC Time: " + now.toISOString().replace("T", " ").split(".")[0];
    }
    setInterval(updateUTCTime, 1000);
    updateUTCTime();
  </script>
</body>
</html>